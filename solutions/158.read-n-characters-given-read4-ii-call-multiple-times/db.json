{"python":"# The read4 API is already defined for you.\r\n# @param buf, a list of characters\r\n# @return an integer\r\n# def read4(buf):\r\nfrom collections import deque\r\nclass Solution(object):\r\n    def __init__(self):\r\n        self.buffer = collections.deque([])\r\n        \r\n    def read(self, buf, n):\r\n        \"\"\"\r\n        :type buf: Destination buffer (List[str])\r\n        :type n: Maximum number of characters to read (int)\r\n        :rtype: The number of characters read (int)\r\n        \"\"\"\r\n        idx = 0\r\n        m = n\r\n        while m > 0:\r\n            buf4 = [\"\"]*4\r\n            l = read4(buf4)\r\n            if not l:\r\n                break\r\n            for b in buf4:\r\n                if b:\r\n                    self.buffer.append(b)\r\n\r\n            m -= 4\r\n            \r\n        for i in xrange(min(len(self.buffer), n)):\r\n            buf[i] = self.buffer[0]\r\n            self.buffer.popleft()\r\n            idx += 1\r\n        return idx"}